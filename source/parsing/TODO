make var expansion recursive?
is the recursion happening at pasring or during the export?

refactor/simplify the tokenizer/parsing?
